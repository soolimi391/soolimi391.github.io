<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ë¡œë˜ ìƒë‹´ ì±—ë´‡</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100vh;
      font-family: 'Noto Sans KR', sans-serif;
      background: #f5f6fa;
    }
    body {
      display: flex;
      flex-direction: column;
    }
    .chat-container {
      display: flex;
      flex-direction: column;
      flex: 1;
      max-width: 700px;
      width: 100%;
      margin: 0 auto;
      background: #fff;
    }
    .chat-box {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      background: #f0f2f5;
    }
    .message {
      display: flex;
      margin-bottom: 20px;
      align-items: flex-start;
    }
    .message.bot { flex-direction: row; }
    .message.user { flex-direction: row-reverse; }
    .avatar {
      width: 50px;
      height: 50px;
      margin: 0 10px;
      flex-shrink: 0;
    }
    .avatar img {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
      display: block;
    }
    .bubble {
      background: #fff;
      border: 2px solid #2b79ff;
      border-radius: 15px;
      padding: 14px 16px;
      font-size: 16px;
      max-width: 80%;
      line-height: 1.5;
      position: relative;
      word-break: break-word;
    }
    .bubble::before {
      content: "";
      position: absolute;
      top: 20px;
      left: -15px;
      width: 0;
      height: 0;
      border-top: 10px solid transparent;
      border-bottom: 10px solid transparent;
      border-right: 15px solid #fff;
    }
    .user .bubble {
      background: #007BFF;
      color: white;
      border: none;
    }
    .user .bubble::before { display: none; }
    .chat-input {
      display: flex;
      padding: 10px;
      border-top: 1px solid #ddd;
      background: #fff;
    }
    .chat-input input {
      flex: 1;
      padding: 14px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 16px;
      outline: none;
    }
    .chat-input button {
      margin-left: 10px;
      padding: 0 20px;
      font-size: 16px;
      background: #007BFF;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    .center-button {
      display: none;
      justify-content: center;
      align-items: center;
      padding: 40px;
      height: 100vh;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: rgba(245, 246, 250, 0.9);
      z-index: 999;
    }
    .center-button.show {
      display: flex;
    }
    .center-button button {
      background: #28a745;
      color: white;
      font-size: 20px;
      padding: 16px 30px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    @media (max-width: 768px) {
      html, body {
        height: 100dvh;
        overflow: hidden;
      }
      .bubble { font-size: 15px; padding: 12px; max-width: 85%; }
      .chat-input input { font-size: 15px; padding: 12px; }
      .chat-input button { font-size: 15px; padding: 0 15px; }
    }
  </style>
</head>
<body>

<div class="chat-container">
  <div class="chat-box" id="chatBox">
    <div class="message bot">
      <div class="avatar"><img src="https://i.imgur.com/dBa600u.png" alt="ìƒë‹´ì›" /></div>
      <div class="bubble">
        ì•ˆë…•í•˜ì„¸ìš”!<br>
        <strong style="color:#2b79ff;">ë¡œë˜ ìƒë‹´ ì±—ë´‡</strong>ì…ë‹ˆë‹¤ ğŸ˜Š<br>
        ë¬´ì—‡ì´ë“  ë¬¼ì–´ë³´ì„¸ìš”! <strong style="color:#e60000;">ë¡œë˜ ì¶”ì²œë²ˆí˜¸</strong>ë„ ì•Œë ¤ë“œë ¤ìš”!<br>
        ì˜ˆ: 'ì´ë²ˆ', '1234íšŒì°¨', 'í™•ë¥ ', 'ì„¸ê¸ˆ', 'ìµœëŒ€ ë‹¹ì²¨ê¸ˆ'
      </div>
    </div>
  </div>
  <div class="chat-input" id="chatInput">
    <input type="text" id="userInput" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." onkeydown="if(event.key==='Enter') sendMessage();" />
    <button onclick="sendMessage()">ì „ì†¡</button>
  </div>
</div>

<div class="center-button" id="landingButton">
  <button onclick="location.href='./landing.html'">ë¡œë˜ ë²ˆí˜¸ ì¶”ì²œ ë°›ìœ¼ëŸ¬ ê°€ê¸°</button>
</div>


<!-- HEADì™€ STYLEì€ í˜„ì¬ ìƒíƒœ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ì„¸ìš” -->
<!-- ì—¬ê¸°ì— JS ì „ì²´ ì¶”ê°€ -->
<script>
    const chatBox = document.getElementById("chatBox");
    const chatInput = document.getElementById("chatInput");
    const landingButton = document.getElementById("landingButton");
    let questionCount = 0;
  
    function appendMessage(content, type) {
      const msg = document.createElement("div");
      msg.className = "message " + type;
      const avatar = document.createElement("div");
      avatar.className = "avatar";
      if (type === "bot") {
        const img = document.createElement("img");
        img.src = "https://i.imgur.com/dBa600u.png";
        avatar.appendChild(img);
      }
      const bubble = document.createElement("div");
      bubble.className = "bubble";
      bubble.innerHTML = content;
      if (type === "bot") {
        msg.appendChild(avatar);
        msg.appendChild(bubble);
      } else {
        msg.appendChild(bubble);
        msg.appendChild(avatar);
      }
      chatBox.appendChild(msg);
      chatBox.scrollTop = chatBox.scrollHeight;
    }
  
    function sendMessage() {
      const input = document.getElementById("userInput");
      const text = input.value.trim();
      if (!text) return;
      appendMessage(text, "user");
      input.value = "";
  
      questionCount++;
      if (questionCount >= 3 || text.includes("ì¶”ì²œ")) {
        chatInput.style.display = "none";
        landingButton.classList.add("show");
      }
  
      setTimeout(() => {
        const msg = text.toLowerCase();
  
        // âœ… ìµœì‹  íšŒì°¨ ë‹¹ì²¨ë²ˆí˜¸
        if (msg.includes("ë²ˆí˜¸") || msg.includes("ì´ë²ˆ") || msg.includes("ë‹¹ì²¨")) {
          fetch("https://api.allorigins.win/get?url=" + encodeURIComponent("https://www.dhlottery.co.kr/common.do?method=main"))
            .then(res => res.json())
            .then(data => {
              const html = data.contents;
              const match = html.match(/<strong id="lottoDrwNo">(\d+)<\/strong>/);
              if (match) {
                const latestRound = match[1];
                fetch(`https://api.allorigins.win/get?url=${encodeURIComponent('https://www.dhlottery.co.kr/common.do?method=getLottoNumber&drwNo=' + latestRound)}`)
                  .then(res => res.json())
                  .then(data => {
                    const lotto = JSON.parse(data.contents);
                    if (lotto.returnValue === "success") {
                      const nums = [lotto.drwtNo1, lotto.drwtNo2, lotto.drwtNo3, lotto.drwtNo4, lotto.drwtNo5, lotto.drwtNo6].join(', ');
                      appendMessage(`ğŸ”” <strong>${lotto.drwNo}íšŒì°¨ ìµœì‹  ë‹¹ì²¨ë²ˆí˜¸</strong><br>${nums} + ë³´ë„ˆìŠ¤ ${lotto.bnusNo}<br>1ë“± ë‹¹ì²¨ê¸ˆ: <strong>${Number(lotto.firstWinamnt).toLocaleString()}ì›</strong>`, "bot");
                    }
                  });
              } else {
                appendMessage("ìµœì‹  íšŒì°¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.", "bot");
              }
            });
          return;
        }
  
        // âœ… íšŒì°¨ë³„ ë²ˆí˜¸ + ë‹¹ì²¨ê¸ˆ
        if (msg.match(/(\d+)[\s]*íšŒì°¨/)) {
          const round = msg.match(/(\d+)[\s]*íšŒì°¨/)[1];
          fetch(`https://api.allorigins.win/get?url=${encodeURIComponent('https://www.dhlottery.co.kr/common.do?method=getLottoNumber&drwNo=' + round)}`)
            .then(res => res.json())
            .then(data => {
              const lotto = JSON.parse(data.contents);
              if (lotto.returnValue === "success") {
                const nums = [lotto.drwtNo1, lotto.drwtNo2, lotto.drwtNo3, lotto.drwtNo4, lotto.drwtNo5, lotto.drwtNo6].join(', ');
                appendMessage(`${round}íšŒì°¨ ë‹¹ì²¨ë²ˆí˜¸ëŠ” <strong>${nums} + ë³´ë„ˆìŠ¤ ${lotto.bnusNo}</strong>ì…ë‹ˆë‹¤.<br>1ë“± ë‹¹ì²¨ê¸ˆ: <strong>${Number(lotto.firstWinamnt).toLocaleString()}ì›</strong>`, "bot");
              } else {
                appendMessage(`${round}íšŒì°¨ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`, "bot");
              }
            })
            .catch(() => appendMessage("ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", "bot"));
          return;
        }
  
        // âœ… Q&A í‚¤ì›Œë“œ ì‘ë‹µ
        const qnaList = [
          { kw: ["í™•ë¥ "], msg: "ë¡œë˜ 1ë“± ë‹¹ì²¨ í™•ë¥ ì€ ì•½ 1/8,145,060 ì…ë‹ˆë‹¤." },
          { kw: ["ì„¸ê¸ˆ"], msg: "ë‹¹ì²¨ê¸ˆì˜ ì•½ 33%ëŠ” ì„¸ê¸ˆìœ¼ë¡œ ê³µì œë©ë‹ˆë‹¤." },
          { kw: ["íŒë§¤"], msg: "íŒë§¤ ì‹œê°„ì€ ì˜¤ì „ 6ì‹œ~ìì •, í† ìš”ì¼ì€ ì˜¤í›„ 8ì‹œê¹Œì§€ì…ë‹ˆë‹¤." },
          { kw: ["ê°€ê²©", "ì–¼ë§ˆ"], msg: "ë¡œë˜ 1ê²Œì„ì€ 1,000ì›ì…ë‹ˆë‹¤." },
          { kw: ["ìµœëŒ€", "ë‹¹ì²¨ê¸ˆ"], msg: "ì—­ëŒ€ ìµœê³  ë‹¹ì²¨ê¸ˆì€ 2003ë…„ 4ì›” ì•½ 407ì–µ ì›ì…ë‹ˆë‹¤!" },
          { kw: ["ë³´ë„ˆìŠ¤"], msg: "ë³´ë„ˆìŠ¤ ë²ˆí˜¸ëŠ” 2ë“±ì„ ê²°ì •í•˜ëŠ” ì¶”ê°€ ë²ˆí˜¸ì…ë‹ˆë‹¤." },
          { kw: ["ìš”ì¼"], msg: "ë¡œë˜ ì¶”ì²¨ì€ ë§¤ì£¼ í† ìš”ì¼ì…ë‹ˆë‹¤." },
          { kw: ["ë¬¸ì˜"], msg: "ë¬¸ì˜ ì ‘ìˆ˜ë¥¼ ìœ„í•´ ì´ë¦„ê³¼ ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”." },
          { kw: ["í›„ê¸°"], msg: "ìµœê·¼ ë‹¹ì²¨ì: ê¹€*ìˆ˜ë‹˜, ì •*ì˜ë‹˜ - ì¶•í•˜ë“œë¦½ë‹ˆë‹¤! ğŸ‰" }
        ];
  
        for (let item of qnaList) {
          if (item.kw.some(k => msg.includes(k))) {
            appendMessage(item.msg, "bot");
            return;
          }
        }
  
        appendMessage("ê¶ê¸ˆí•œ ê²ƒì„ ë§ì”€í•´ë³´ì„¸ìš”! ì˜ˆ: 'ì´ë²ˆ ë‹¹ì²¨ë²ˆí˜¸', 'í™•ë¥ ', 'ì„¸ê¸ˆ', '1234íšŒì°¨'", "bot");
      }, 500);
    }
  </script>
  
  

</body>
</html>
